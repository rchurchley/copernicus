@import 'reset.scss';
@import 'grid-mixins.scss';
@import 'typography-mixins.scss';

/*/////////////////////
// SOLARIZED COLOURS //
/////////////////////*/

$Red: #DC322F;			$Orange: #CB4B16;			$Yellow: #B58900;
$Green: #859900;		$Cyan: #2AA198;				$Blue: #268BD2;
$Violet: #6C71C4;		$Magenta: #D33682;			$Dark: #073642;
$Grey: #93A1A1;			$Light: #E4E6E6;			$White: #FFFFFF;

$Foreground: $Dark;		/* default text colour */
$Background: $White;	/* default background */
$HeaderForeground: $White;		/* default header colour */
$HeaderBackground: $Dark;		/* default header background */

$AltForeground: $Grey;	/* link and secondary text colour */
$AltBackground: $Light;	/* caption and sidenote background */

$LinkColour: $Red;

/*###############
## MAIN STYLES ##
###############*/

html {
	background-image: url('../img/bg/pw_maze_white.png');
	background-size: 46px auto;
	@media screen and #{$RetinaScreen} {
		background: url('../img/bg/pw_maze_white_@2X.png');
	}
}

a { color: $LinkColour; }

body { 
	color: $Foreground;
	background-color: $Background; 

	-moz-box-shadow:
        5px 0 5px -5px $Grey,
        -5px 0 5px -5px $Grey;
    -webkit-box-shadow:
        5px 0 5px -5px $Grey,
        -5px 0 5px -5px $Grey;
    box-shadow:
        5px 0 5px -5px $Grey,
        -5px 0 5px -5px $Grey;
}


body > header, body > footer	{ 
	color: $HeaderForeground; 	  	
	background-color: $HeaderBackground; 
	a { color: $HeaderForeground; }
}

blockquote, caption, code, pre, samp { 
	color: $AltForeground; 
}

/*######################
## MAIN GRID ELEMENTS ##
######################*/

body > header, body > footer {
	width: 100%;
}

body > section, body > article {
	@include toplevelgutters;
}

.postheader {
	@include fullcontent;
}

.column {
	@include maincontent;
	float: left;
}

.margin {
	@include sidecontent;
	clear: none;
	float:left;
}

ul, ol, dd { 
	/* lists get padding instead of margins so to avoid recalculating width */
	padding-left: $HGutter; 
}

blockquote {
	padding-left: $HGutter;
	padding-right: $HGutter; 
}

figure {
	line-height: 0; /* ensures no gap between img and figcaption */
	img { max-width: 100%; }
	figcaption { @include footnotetype; }
}


/*##############
## TYPOGRAPHY ##
##############*/

body { 
	@include texttype;
}

header, h1, h2, h3, h4, th, dt { 
	@include headlinetype;
}

h1		{ @include setfontsize(1); }
h2		{ @include setfontsize(1); }
h3		{ @include setfontsize(1); }
h4, dt	{ @include setfontsize(0); }

figcaption {
	h2 	{ @include setfontsize(1); 	@include pskip(0.5); }
	h3 	{ @include setfontsize(0); 	@include pskip(0.5); }
	p 	{ @include footnotetype; }
}

strong, b	{ font-weight: bold; }
em, i		{ font-style: italic; }

a 		{ text-decoration: none; }
a:hover	{ text-decoration: underline; }

sup, sub { 
	@include setfontsize(-1); 
	vertical-align: baseline; 
	position: relative;
}
sup	{ top: -0.4em; }
sub	{ top:  0.4em; }

.side-matter {
	@include footnotetype;
}

p, blockquote, dt, dd, li {
	@media screen and #{$ColumnatedScreen} {
		text-align: justify;
		text-justify: distribute;
		-webkit-hyphens: auto;
		-moz-hyphens: auto;
    	hyphens: auto;
    }
}

figure { text-align: center; }
figcaption, figcaption p { text-align: left; }

time {
	@include footnotetype;
}


/*###########
## SPACING ##
###########*/

section, article, figure { 
	@include pskip;  
}

nav	a { 
	display: table-cell;
	float: left;
	margin-right: 0.5 * $VGutter;
	white-space: nowrap;
	ul { margin: none; }
}

dt,dd	{ line-height: 0.95 * $DefaultLineHeight; }

h2, h3, h4, h5, h6, p, dl, ul, ol, blockquote {
	@include pskip;
}

dt { margin-top: 0.5* $HGutter; }


/*###########
## COLOURS ##
###########*/

figure figcaption	{ 
	@include paddedbox(1,0.5,1,0.5);
	background-color: $AltBackground;
}

section .column {
	border-bottom: 1px solid $AltForeground;
	&:last-of-type { border-bottom: none; }
	@media screen and #{$SmallScreen} {
		@include pskip(0.5);
	}
}

section:last-of-type .column {
	border-bottom: none;
}

/*///////////////////////
// BASIC STYLE CLASSES //
///////////////////////*/

body > footer section {
	@include sidecontent;
	@include toplevelgutters;
	@include footnotetype;
	@include pskip;
	float: left;
	clear: none;

	/* Styling */
	color: $AltForeground;
	a 	{ color: $AltForeground; }
	p 	{ @include pskip(0.25); }
	p:last-of-type { @include pskip; }
	@media screen and #{$SmallScreen} {
		@include pskip; 
	}
}

/*/////////////////////
// HEADER AND FOOTER //
/////////////////////*/

body {
	text-rendering: optimizeLegibility;
}

body > header {
	background-color: $HeaderBackground;
	h1 {
		@include paddedbox;
	}
}

.menu {
	@include pskip(2);
	@include headlinetype;
	background-color: $Background;
	border-bottom: 1px dotted $AltForeground;
	padding-left: 0;
	li {
		@include sethorizontal(1/4,0,0);
		display: inline-block;
		position: relative;
		a {  
			@include paddedbox(0.5,1,0.5,1);
			width: 100%; 
			text-align: center;
			margin-right: 0;
		}
		> a { z-index: 2;}
		.sub-menu {
			@media screen and #{$ColumnatedScreen} {
				position:absolute;
				left: 0;
				top: 100%;
			}
			padding-left: 0;
			display: none;
			border: 1px solid $AltBackground;
			background-color: $Background;
			z-index: 1;
			-moz-box-shadow:
        		5px 5px 5px -5px $Grey;
    		-webkit-box-shadow:
    		    5px 5px 5px -5px $Grey;
   			box-shadow:
    		    5px 5px 5px -5px $Grey;
		}
		&:hover .sub-menu {
			display: block;
		}
	}
}

body > footer {
	@include paddedbox(1,0,1,0);
	#search label {
		display: none;
	}
}

#prev-next {
	@include texttype;
	@include paddedbox;
	background-color: $Background;
	a { color: $Foreground; }
	border-top: 1px dotted $AltForeground;
	ul { padding-left: 0; }
	li { display: inline-block; margin-right: $HGutter; @include pskip(0.5); }
	.prev { float: left; }
	.next { float: right; }
}

/*////////////////////
// DISPLAYING POSTS //
////////////////////*/

body > article {
	border-bottom: 1px dotted $Grey;
}
body > article:last-of-type {
	border: none;
}

figure figcaption {
	clear:both;
}

article header, section header {
	h2 { 
		@include setfontsize(1); 
		float:left;
		@include pskip(0);
	}
	time {
		float: right;
	}
	@include pskip;
}

img { 
	max-width: 100%; 
	height: auto;
	margin-right: $HGutter;
}

address, .author {
	h3 { 
		@include setfontsize(0);
		@include pskip(0.5);
	}
	p  { 
		@include footnotetype;
		color: $AltForeground;
	}
	margin-top: 2*$VGutter;
	img {
		height: auto;
		width: auto;
		float: left;
	}
}

footer address {
	margin-top:0;
}

.sidefig {
	@media screen and #{$SmallScreen} {
		display: none;
	}
}

aside:last-of-type {
	@include pskip;
}

.sidefig-placeholder {
	@media screen and #{$ColumnatedScreen} {
		width: 0;
		height: 0;
		margin: 0;
		clear:none;
		* { display: none; }
	}
}

.infobox {
	background-color: $AltBackground;
	-moz-box-shadow: 5px 5px 5px -5px $Grey;
    -webkit-box-shadow: 5px 5px 5px -5px $Grey;
   	box-shadow: 5px 5px 5px -5px $Grey;
    @include footnotetype;
    @include paddedbox(0.5,0.5,0.5,0.5);
    @include pskip;
}

.footnote-snapback {
	@media screen and #{$ColumnatedScreen} {
		display: none;
	}
}

/*////////////
// COMMENTS //
////////////*/

input {
	padding: 0.5 * $VGutter;
}

#comments {
	width: 100%;
	margin-top: 3*$VGutter;
	
	h2 { 
		@include fullcontent;
		margin-bottom: $VGutter; 
	}

	article {
		width:100%;
		@extend .medskip;
		min-height: 64px + 2*$VGutter;
		border-top: 1px dotted $Grey;
		padding-top: $VGutter;
	}

	> article:first-of-type {
		border: none;
	}

	.children { 
		padding: 0; 
		margin-left: 0;
	}

	header {
		@include sidecontent;
		@include footnotetype; 

		@media screen and (min-width: $MediumGrid)	{ 
			position:absolute;
			right: 0;
			top: $VGutter;
		}

		img {
			margin-right: $HGutter;
			float: left;
			width: 64px;
			height: 64px;
		}
	}
	
	#respond {
		@include sethorizontal(1.00, 0, 0);
		@include footnotetype; 

		h3, p { 
			@include maincontent;
			@include pskip;
		}
		
		label {
			margin-right: $HGutter;
		}
		
		input, textarea {
			border: 1px solid $Grey;
			@include texttype;
		}

		.form-allowed-tags, .form-submit { 
			@include sidecontent;
			float: left;
		}

		.comment-form-comment {
			float: left;

			label { display: none; }
			textarea {
				width: 100%;
			}
		}

		#submit {
			background-color: $Foreground;
			color: $Background;
		}
	}
}




